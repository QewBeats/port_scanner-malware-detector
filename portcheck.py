#port scanner by joseph Quaye
import socket
from datetime import datetime
import sys
import utility

#socket time out on the ports!
#thread the prgrams so mutiple ports can be scanned!

#u =utility.utility.system_call("netstat -an")
#print(u)

time1 = datetime.now()
if (len(sys.argv) < 2 ):

 localhost='127.0.0.1'
 print ("--->Scanning Local Host For Open or  Closed ports<--- Range 0-1024")

 for port in range(0,1024):
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        result = sock.connect_ex((localhost, port))
        if result == 0:
            print ("Port {0}: \t  \t Open".format(port)) #not entering 0 displays nothing
        sock.close()
else:
    ip_address = input ("Enter an IP: ")
    print ("Scanning Host",ip_address)

    print ("--->Scanning",ip_address, "in the ranges",sys.argv[1],"and ",sys.argv[2]) #obfusciate the code
    for port in range(int(sys.argv[1]),int(sys.argv[2])):
        sock =socket.socket(socket.AF_INET,socket.SOCK_STREAM)
        sock.settimeout(1)
        result = sock.connect_ex((ip_address, port))

        if result == 0:
            print ("PORT {0}: \t \t  Open".format(port))
        else:
            print ("PORT {0}: \t \t Closed".format(port))

        sock.close()
#this is site

time2 = datetime.now()

# Find out how long it took
total =  time2 - time1

# Printing the information to screen
print ( 'Scanning Finished in: ', total)

